<section class="post">
  <article class="card">
    <header class="card-header flex-row justify-space-between">
      <h2>{{post.title}}</h2>
      <p>Posted by {{post.User.username}} on {{format_date post.createdAt}}</p>
    </header>
    <p class="card-body">{{post.body}}</p>
  </article>

  {{#if post.Comments}}
    <article class="card">
      <header class="card-header">
        <h3>Comments</h3>
      </header>

      <figure class="card-body">
        {{#each post.Comments}}
          <figcaption>
            <p>{{body}}</p>
            <p>&mdash; {{User.username}}, {{format_date createdAt}}</p>
          </figcaption>
        {{/each}}
      </figure>
    </article>
  {{/if}}


  {{#if loggedIn}}
  <form id="new-comment-form" class="card">
    <header class="card-header">
      <h3>Add New Comment</h3>
    </header>

    <figure class="card-body">
      <input type="hidden" name="post-id" value="{{post.id}}" />
      <textarea name="comment-body" class="form-input"></textarea>
      <button type="submit" class="btn">Submit</button>
    </figure>
  </form>
  {{/if}}
</section>

<script src="/js/comment.js"></script>